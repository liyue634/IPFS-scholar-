(function(e){function t(t){for(var s,n,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&m.push(r[n][0]),r[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(e[s]=l[s]);u&&u(t);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(s=!1)}s&&(i.splice(t--,1),e=n(n.s=a[0]))}return e}var s={},r={app:0},i=[];function n(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=s,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"06f8":function(e,t,a){e.exports=a.p+"img/u175.ff0f1e87.png"},"0bba":function(e,t,a){e.exports=a.p+"img/u111.268da0c6.png"},"1a33":function(e,t,a){},2395:function(e,t,a){},2711:function(e,t,a){e.exports=a.p+"img/u11.7646da26.png"},"2e11":function(e,t,a){},"364a":function(e,t,a){"use strict";var s=a("dbf9"),r=a.n(s);r.a},"3d49":function(e,t,a){e.exports=a.p+"img/u154.228c0321.png"},"3dfc":function(e,t,a){"use strict";var s=a("fd24"),r=a.n(s);r.a},"3e0c":function(e,t,a){"use strict";var s=a("2e11"),r=a.n(s);r.a},"41d6":function(e,t,a){},"43cb":function(e,t,a){"use strict";var s=a("41d6"),r=a.n(s);r.a},4993:function(e,t,a){e.exports=a.p+"img/u168.e537e793.png"},"52ab":function(e,t,a){"use strict";var s=a("cad7"),r=a.n(s);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("topHeader"),a("div",[a("router-view")],1)],1)},i=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"top-header"},[a("el-menu",{staticClass:"my-el-menu",attrs:{"default-active":e.activeIndex,mode:"horizontal"},on:{select:e.handleSelect}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("span",{staticClass:"el-icon-menu"})]),a("el-menu-item",{attrs:{index:"1-1"}},[a("span",{staticClass:"el-icon-search"}),e._v("Retrieval")]),a("el-menu-item",{attrs:{index:"1-2"}},[a("span",{staticClass:"el-icon-upload2"}),e._v("Upload")])],2),this.$store.state.authToken?e._e():a("el-menu-item",{attrs:{index:"2"}},[a("span",{staticClass:"el-icon-user-solid"})]),this.$store.state.authToken?a("el-submenu",{attrs:{index:"3"}},[a("template",{slot:"title"},[a("span",{staticClass:"el-icon-user-solid"}),a("span",[e._v(e._s(e.$store.state.currentUser.username))])]),a("el-menu-item",{attrs:{index:"3-1"}},[a("span",{staticClass:"el-icon-s-finance"}),e._v("Wallet")])],2):e._e()],1),a("div",{staticClass:"line"})],1)},o=[],l=(a("b0c0"),a("ac1f"),a("5319"),{data:function(){return{activeIndex:"1-1"}},methods:{handleSelect:function(e,t){switch(e){case"1-1":"index"!=this.$route.name&&this.$router.replace({path:"/"});break;case"1-2":this.$store.state.authToken?"upload"!=this.$route.name&&this.$router.replace({path:"/upload"}):this.$message.error("Please log in");break;case"1-3":"downloadList"!=this.$route.name&&this.$router.replace({path:"/downloadList"});break;case"2":this.$store.state.authToken||"login"!=this.$route.name&&this.$router.replace({path:"/login"});break;case"3-1":"wallet"!=this.$route.name&&this.$router.replace({path:"/wallet"});break;case"3-2":"downloadRec"!=this.$route.name&&this.$router.replace({path:"/downloadRec"});break;case"3-3":"uploadRec"!=this.$route.name&&this.$router.replace({path:"/uploadRec"});break;case"3-4":"viewRec"!=this.$route.name&&this.$router.replace({path:"/viewRec"});break;case"3-5":"setting"!=this.$route.name&&this.$router.replace({path:"/setting"});break}}},mounted:function(){}}),c=l,u=(a("ea4f"),a("2877")),d=Object(u["a"])(c,n,o,!1,null,null,null),m=d.exports,f={data:function(){return{}},methods:{},components:{topHeader:m}},p=f,g=(a("7c55"),Object(u["a"])(p,r,i,!1,null,null,null)),h=g.exports,v=a("8c4f"),b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fs-index"},[a("h1",{staticClass:"index-titile"},[e._v("IPFS Scholar")]),a("div",{staticClass:"search-input-container"},[a("el-input",{attrs:{placeholder:"Please enter the content"},model:{value:e.searchContent,callback:function(t){e.searchContent=t},expression:"searchContent"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.toResult},slot:"append"})],1)],1),a("div",{staticClass:"icon-container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"r-item",on:{click:function(t){return e.toResultType("Philosophy")}}},[e._m(0),a("div",{staticClass:"i-txt"},[e._v("Philosophy")])]),a("div",{staticClass:"r-item",on:{click:function(t){return e.toResultType("Economics")}}},[e._m(1),a("div",{staticClass:"i-txt"},[e._v("Economics")])]),a("div",{staticClass:"r-item",on:{click:function(t){return e.toResultType("Science")}}},[e._m(2),a("div",{staticClass:"i-txt"},[e._v("Science")])])]),a("div",{staticClass:"row"},[a("div",{staticClass:"r-item",on:{click:function(t){return e.toResultType("Engineering")}}},[e._m(3),a("div",{staticClass:"i-txt"},[e._v("Engineering")])]),a("div",{staticClass:"r-item",on:{click:function(t){return e.toResultType("Law")}}},[e._m(4),a("div",{staticClass:"i-txt"},[e._v("Law")])]),a("div",{staticClass:"r-item",on:{click:function(t){return e.toResultType("Medicine")}}},[e._m(5),a("div",{staticClass:"i-txt"},[e._v("Medicine")])]),a("div",{staticClass:"r-item",on:{click:function(t){return e.toResultType("Management Science")}}},[e._m(6),a("div",{staticClass:"i-txt"},[e._v("Management Science")])]),a("div",{staticClass:"r-item",on:{click:e.showMore}},[e._m(7),a("div",{staticClass:"i-txt"},[e._v("More")])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:e.showFlag,expression:"showFlag"}],staticClass:"row"},[a("div",{staticClass:"r-item",on:{click:function(t){return e.toResultType("Pedagogy")}}},[e._m(8),a("div",{staticClass:"i-txt"},[e._v("Pedagogy")])]),a("div",{staticClass:"r-item",on:{click:function(t){return e.toResultType("Military Science")}}},[e._m(9),a("div",{staticClass:"i-txt"},[e._v("Military Science")])]),a("div",{staticClass:"r-item",on:{click:function(t){return e.toResultType("History")}}},[e._m(10),a("div",{staticClass:"i-txt"},[e._v("History")])]),a("div",{staticClass:"r-item",on:{click:function(t){return e.toResultType("Literature")}}},[e._m(11),a("div",{staticClass:"i-txt"},[e._v("Literature")])]),a("div",{staticClass:"r-item",on:{click:function(t){return e.toResultType("Art")}}},[e._m(12),a("div",{staticClass:"i-txt"},[e._v("Art")])])])])])},y=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"i-icon"},[s("img",{attrs:{src:a("f73d")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"i-icon"},[s("img",{attrs:{src:a("7a83")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"i-icon"},[s("img",{attrs:{src:a("0bba")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"i-icon"},[s("img",{attrs:{src:a("fccd")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"i-icon"},[s("img",{attrs:{src:a("dc3f")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"i-icon"},[s("img",{attrs:{src:a("e3dc")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"i-icon"},[s("img",{attrs:{src:a("f623")}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"i-icon"},[a("span",{staticClass:"el-icon-more",staticStyle:{"font-size":"50px"}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"i-icon"},[s("img",{attrs:{src:a("06f8")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"i-icon"},[s("img",{attrs:{src:a("3d49")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"i-icon"},[s("img",{attrs:{src:a("bdd5")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"i-icon"},[s("img",{attrs:{src:a("4993")}})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"i-icon"},[s("img",{attrs:{src:a("f12d")}})])}],w={data:function(){return{searchContent:"",showFlag:!1}},methods:{toResult:function(){this.$router.push({path:"/searchResult",query:{searchContent:this.searchContent}})},toResultType:function(e){this.$router.push({path:"/searchResult",query:{searchType:e}})},showMore:function(){this.showFlag=!this.showFlag}},mounted:function(){}},_=w,$=(a("3e0c"),Object(u["a"])(_,b,y,!1,null,null,null)),C=$.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fs-upload"},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.isloading,expression:"isloading"}],ref:"ruleForm",staticClass:"my-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"auto","label-position":"left"}},[a("el-form-item",{attrs:{label:"File"}},[a("input",{attrs:{type:"file"},on:{change:function(t){return e.getFile(t)}}})]),a("el-form-item",{attrs:{label:"classification",prop:"classification",required:""}},[a("el-select",{attrs:{placeholder:"Please select"},model:{value:e.ruleForm.classification,callback:function(t){e.$set(e.ruleForm,"classification",t)},expression:"ruleForm.classification"}},e._l(e.classificationList,(function(e,t){return a("el-option",{key:t,attrs:{label:e,value:e}})})),1)],1),a("el-form-item",{attrs:{label:"Abstract",prop:"abstract",required:""}},[a("el-input",{staticStyle:{width:"600px"},attrs:{type:"textarea"},model:{value:e.ruleForm.abstract,callback:function(t){e.$set(e.ruleForm,"abstract",t)},expression:"ruleForm.abstract"}})],1),a("el-form-item",{attrs:{label:"Payment address",prop:"paymentAddress",required:""}},[a("el-select",{attrs:{placeholder:"Please select"},model:{value:e.ruleForm.paymentAddress,callback:function(t){e.$set(e.ruleForm,"paymentAddress",t)},expression:"ruleForm.paymentAddress"}},e._l(e.$store.state.balancesList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.addr.name,value:t}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Submit")])],1)],1)],1)},k=[],F={data:function(){return{isloading:!1,customFile:"",classificationList:["Philosophy","Economics","Law","Pedagogy","Literature","History","Science","Engineering","Agriculture specialty","Medicine","Military science","Management Science","Art"],ruleForm:{paymentAddress:"",abstract:"",classification:""},rules:{classification:[{required:!0,message:"Please select classification",trigger:"blur"}],abstract:[{required:!0,message:"Please input abstract",trigger:"blur"}],paymentAddress:[{required:!0,message:"Please select paymentAddress",trigger:"change"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(a){if(!a)return console.log("error submit!!"),!1;if(t.customFile){var s=new FormData;s.set("abstract",t.ruleForm.abstract),s.set("description",t.ruleForm.classification),s.set("token",t.$store.state.currentUser.ffsToken),s.set("walletAddr",t.$store.state.balancesList[t.ruleForm.paymentAddress].addr.addr),s.append("file",t.customFile),t.isloading=!0,t.$req.apiUpload(s,t.$store.state.authToken,{success:function(a){console.log(a),t.isloading=!1,200==a.data.code?(t.$message.success("Upload successful"),t.customFile="",t.$refs[e].resetFields()):t.$message.error(a.data.msg)},fail:function(e){console.log(e),t.isloading=!1}})}else t.$message.error("Please select a file")}))},getFile:function(e){this.customFile=e.target.files[0]}}},P=F,T=(a("3dfc"),Object(u["a"])(P,x,k,!1,null,null,null)),E=T.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fs-login"},[a("h2",{staticStyle:{"text-align":"center"}},[e._v("Login")]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",staticClass:"my-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"auto"}},[a("el-form-item",{attrs:{label:"User",prop:"userName"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),a("el-form-item",{attrs:{label:"Password",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),a("el-form-item",[a("el-button",{attrs:{disabled:e.loading,type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Submit")])],1),a("el-form-item",[a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:e.toReg}},[e._v("No account? To register")])],1)],1)],1)},A=[],L={data:function(){return{loading:!1,ruleForm:{userName:"",password:""},rules:{userName:[{required:!0,message:"Enter one user name",trigger:"blur"}],password:[{required:!0,message:"Please input a password",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,t.$req.apiLogin(t.ruleForm.userName,t.ruleForm.password,{success:function(e){t.loading=!1,200==e.data.code?(t.$store.commit("login",{authToken:e.data.data.AuthToken,balancesList:e.data.data.balancesList,currentUser:e.data.data.currentuser}),t.$message({message:"Login successful",type:"success"}),t.$router.replace({path:"/"})):t.$message({message:e.data.msg,type:"error"})},fail:function(e){t.loading=!1,console.log(e)}})}))},toReg:function(){this.$router.replace({path:"/reg"})}},mounted:function(){}},S=L,q=(a("52ab"),Object(u["a"])(S,R,A,!1,null,null,null)),O=q.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fs-reg"},[a("h2",{staticStyle:{"text-align":"center"}},[e._v("Register")]),a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"ruleForm",staticClass:"my-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"auto"}},[a("el-form-item",{attrs:{label:"User",prop:"userName"}},[a("el-input",{attrs:{type:"text",autocomplete:"off"},model:{value:e.ruleForm.userName,callback:function(t){e.$set(e.ruleForm,"userName",t)},expression:"ruleForm.userName"}})],1),a("el-form-item",{attrs:{label:"Password",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.password,callback:function(t){e.$set(e.ruleForm,"password",t)},expression:"ruleForm.password"}})],1),a("el-form-item",{attrs:{label:"Repeat password",prop:"rePassword"}},[a("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.ruleForm.rePassword,callback:function(t){e.$set(e.ruleForm,"rePassword",t)},expression:"ruleForm.rePassword"}})],1),a("el-form-item",{attrs:{label:"Mail",prop:"email"}},[a("el-input",{attrs:{type:"email",autocomplete:"off"},model:{value:e.ruleForm.email,callback:function(t){e.$set(e.ruleForm,"email",t)},expression:"ruleForm.email"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",disabled:e.submitFlag},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("Submit")])],1),a("el-form-item",[a("el-link",{attrs:{underline:!1,type:"primary"},on:{click:e.toReg}},[e._v("Existing account? Go to login")])],1)],1)],1)},N=[],U={data:function(){var e=this,t=function(t,a,s){""===a?s(new Error("Please input a password")):(""!==e.ruleForm.rePassword&&e.$refs.ruleForm.validateField("rePassword"),s())},a=function(t,a,s){""===a?s(new Error("Please enter the password again")):a!==e.ruleForm.password?s(new Error("The two input passwords are inconsistent!")):s()};return{submitFlag:!1,loading:!1,ruleForm:{userName:"",password:"",rePassword:"",email:""},rules:{userName:[{required:!0,message:"enter one user name",trigger:"blur"}],password:[{validator:t,trigger:"blur"}],rePassword:[{validator:a,trigger:"blur"}],email:[{required:!0,message:"Please enter email address",trigger:"blur"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.submitFlag=!0,t.loading=!0,t.$req.apiReg(t.ruleForm.userName,t.ruleForm.password,t.ruleForm.email,{success:function(e){console.log(e.data),t.submitFlag=!1,t.loading=!1,200==e.data.code?(t.$message({message:"Registration successful! Jump to the login page in 3 seconds",type:"success"}),setTimeout((function(){t.$router.replace({path:"/login"})}),3e3)):t.$message({message:e.data.msg,type:"error"})},fail:function(e){console.log(e),t.submitFlag=!1,t.loading=!1}})}))},toReg:function(){this.$router.replace({path:"/login"})}},mounted:function(){}},j=U,M=(a("8f0e"),Object(u["a"])(j,W,N,!1,null,null,null)),D=M.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fs-article"},[a("div",{staticClass:"article-container"},[a("h1",{staticClass:"a-title"},[e._v(e._s(e.articleOBJ.filename))]),a("div",{staticClass:"a-info"},[a("div",[a("el-tag",{staticStyle:{"margin-right":"10px"},attrs:{effect:"dark"}},[e._v("Author")])],1),a("div",[a("el-button",{attrs:{type:"danger"},on:{click:e.tapDownload}},[e._v("Download")])],1)]),a("div",{staticClass:"a-content"},[e._v(" "+e._s(e.articleOBJ.abstract)+" ")])]),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.isloading,expression:"isloading"}],attrs:{title:"Please feel free to give a reward to the uploader",visible:e.dialogPay},on:{"update:visible":function(t){e.dialogPay=t}}},[a("el-form",{ref:"formPay",staticStyle:{"max-width":"80%"},attrs:{"label-position":"top",rules:e.rules,model:e.formPay}},[a("el-form-item",{attrs:{label:"Amounts","label-width":"auto",prop:"Amounts",required:""}},[a("el-input",{staticStyle:{width:"150px"},attrs:{type:"number",min:"1",autocomplete:"off"},model:{value:e.formPay.Amounts,callback:function(t){e.$set(e.formPay,"Amounts",t)},expression:"formPay.Amounts"}})],1),a("el-form-item",{attrs:{label:"Your Wallet Address","label-width":"auto",prop:"addr",required:""}},[a("el-select",{attrs:{placeholder:"SELECT"},model:{value:e.formPay.addr,callback:function(t){e.$set(e.formPay,"addr",t)},expression:"formPay.addr"}},e._l(e.$store.state.balancesList,(function(e,t){return a("el-option",{key:t,attrs:{label:e.addr.addr,value:e.addr.addr}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogPay=!1}}},[e._v("Cancel")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.tapPay("formPay")}}},[e._v("Submit")])],1)],1),a("el-dialog",{attrs:{title:"Download files",visible:e.dialogDownload},on:{"update:visible":function(t){e.dialogDownload=t}}},[a("el-link",{attrs:{href:e.fileDownloadURL,target:"_blank",type:"primary"}},[e._v("Download link")])],1)],1)},B=[],z=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),{data:function(){return{isloading:!1,articleOBJ:"",dialogPay:!1,fileDownloadURL:"",dialogDownload:!1,formPay:{Amounts:"",addr:""},rules:{Amounts:[{required:!0,message:"Please fill in Amounts",trigger:"blur"}],addr:[{required:!0,message:"Please select Address",trigger:"blur"}]}}},methods:{loadArticle:function(){this.articleOBJ=this.$route.params.articleOBJ,console.log(this.articleOBJ)},tapDownload:function(){this.$store.state.authToken?this.dialogPay=!0:this.$message.error("Please login and download")},tapPay:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.isloading=!0,t.$message.success("Paying..."),t.$req.apiPayment(t.formPay.addr,t.articleOBJ.walletAddr,t.formPay.Amounts,t.articleOBJ.cid,t.$store.state.currentUser.ffsToken,t.$store.state.authToken,{success:function(e){200==e.data.code?(console.log("Payment successful",e.data),t.$message.success("Payment successful, requesting file..."),t.$req.apiDownload(t.articleOBJ.filename,t.articleOBJ.cid,t.$store.state.currentUser.ffsToken,t.$store.state.authToken,{success:function(e){t.isloading=!1,console.log("文件请求success待验证",e.data),e.data?e.data.code?t.$message.error(e.data.msg):(t.fileDownloadURL=window.URL.createObjectURL(e.data),t.dialogPay=!1,t.dialogDownload=!0):t.$message.error("服务器返回无data")},fail:function(e){t.isloading=!1,console.log(e)}})):(t.isloading=!1,t.$message.error(e.data.msg),console.log(e))},fail:function(e){t.isloading=!1,console.log(e)}})}))}},mounted:function(){this.loadArticle()}}),H=z,I=(a("364a"),Object(u["a"])(H,J,B,!1,null,null,null)),Y=I.exports,G=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.isloading,expression:"isloading"}],staticClass:"search-result"},[a("div",{staticClass:"content-list"},e._l(e.resultList,(function(t,s){return a("div",{key:s,staticClass:"content-container",on:{click:function(a){return e.toArticle(t)}}},[a("div",{staticClass:"c-title"},[e._v(" "+e._s(t.filename)+" ")]),a("div",{staticClass:"c-content"},[e._v(" "+e._s(t.abstract)+" ")])])})),0)])},K=[],Q={data:function(){return{isloading:!1,searchContent:"",resultList:[]}},methods:{toArticle:function(e){this.$router.push({name:"article",params:{articleOBJ:e}})},doSearch:function(e){var t=this;this.isloading=!0,this.$req.apiRetrieve(this.searchContent,e,this.$store.state.authToken,{success:function(e){t.isloading=!1,200==e.data.code?t.resultList=e.data.data:(t.$message.error(e.data.msg),t.$router.replace({path:"/"}))},fail:function(e){t.isloading=!1,console.log(e)}})}},mounted:function(){this.$route.query.searchType?(this.searchContent=this.$route.query.searchType,this.doSearch(2)):(this.searchContent=this.$route.query.searchContent,this.doSearch(1))}},V=Q,X=(a("43cb"),Object(u["a"])(V,G,K,!1,null,null,null)),Z=X.exports,ee=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fs-wallet"},[a("h1",{staticClass:"index-titile"},[e._v("Wallet")]),a("div",{staticClass:"add-wallet"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogCreateWallet=!0}}},[e._v("CREATE A WALLETADDRESS")])],1),a("div",{staticClass:"content-list"},e._l(e.$store.state.balancesList,(function(t,s){return a("div",{key:s,staticClass:"content-container"},[a("div",{staticClass:"main"},[e._m(0,!0),a("div",{staticClass:"wallet-info"},[a("div",{staticClass:"c-title"},[e._v(" "+e._s(t.addr.name)+" ")]),a("div",{staticClass:"c-content"},[e._v(" "+e._s(t.addr.addr)+" ")]),a("div",{staticClass:"c-content"},[e._v(" Type:"+e._s(t.addr.type)+" ")])])]),a("div",{staticClass:"wallet-balance"},[e._v(" $"+e._s(t.balance)+" ")])])})),0),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{title:"Create Wallet",visible:e.dialogCreateWallet},on:{"update:visible":function(t){e.dialogCreateWallet=t}}},[a("el-form",{ref:"formCreateWallet",staticStyle:{"max-width":"80%"},attrs:{"label-position":"top",rules:e.rules,model:e.formCreateWallet}},[a("el-form-item",{attrs:{label:"WALLET NAME","label-width":"auto",prop:"name",required:""}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.formCreateWallet.name,callback:function(t){e.$set(e.formCreateWallet,"name",t)},expression:"formCreateWallet.name"}})],1),a("el-form-item",{attrs:{label:"TYPE","label-width":"auto",prop:"type",required:""}},[a("el-select",{attrs:{placeholder:"SELECT"},model:{value:e.formCreateWallet.type,callback:function(t){e.$set(e.formCreateWallet,"type",t)},expression:"formCreateWallet.type"}},[a("el-option",{attrs:{label:"bls",value:"bls"}})],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogCreateWallet=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.createWalletSubmit("formCreateWallet")}}},[e._v("确 定")])],1)],1)],1)},te=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wallet-img"},[s("img",{attrs:{src:a("2711")}})])}],ae={data:function(){return{loading:!1,dialogCreateWallet:!1,formCreateWallet:{name:"",type:""},rules:{name:[{required:!0,message:"请选填写NAME",trigger:"blur"}],type:[{required:!0,message:"请选择TYPE",trigger:"blur"}]}}},methods:{createWalletSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,t.$req.apicreateWallet(t.formCreateWallet.name,t.formCreateWallet.type,t.$store.state.currentUser.ffsToken,t.$store.state.authToken,{success:function(e){t.loading=!1,200==e.data.code?(t.$store.commit("updateWallet",e.data.data),t.$message.success("新增钱包成功")):t.$message.error(e.data.msg),t.dialogCreateWallet=!1},fail:function(e){t.loading=!1,console.log(e)}})}))}},mounted:function(){console.log(this.$store.state.balancesList)}},se=ae,re=(a("c875"),Object(u["a"])(se,ee,te,!1,null,null,null)),ie=re.exports;s["default"].use(v["a"]);var ne=[{path:"/",name:"index",component:C},{path:"/upload",name:"upload",component:E},{path:"/login",name:"login",component:O},{path:"/reg",name:"reg",component:D},{path:"/article",name:"article",component:Y},{path:"/searchResult",name:"searchResult",component:Z},{path:"/wallet",name:"wallet",component:ie}],oe=new v["a"]({routes:ne}),le=oe,ce=a("2f62");s["default"].use(ce["a"]);var ue=new ce["a"].Store({state:{authToken:"",balancesList:"",currentUser:""},mutations:{login:function(e,t){e.authToken=t.authToken,e.balancesList=t.balancesList,e.currentUser=t.currentUser},updateWallet:function(e,t){e.balancesList=t}},actions:{},modules:{}}),de=a("bc3a"),me=a.n(de),fe=a("a7fe"),pe=a.n(fe),ge=a("5c96"),he=a.n(ge),ve=(a("0fae"),"/api"),be={apiReg:function(e,t,a,s){me()({method:"post",url:ve+"/register",data:{username:e,password:t,email:a}}).then((function(e){s.success&&s.success(e)})).catch((function(e){s.fail&&s.fail(e)}))},apiLogin:function(e,t,a){me()({method:"post",url:ve+"/login",data:{username:e,password:t}}).then((function(e){a.success&&a.success(e)})).catch((function(e){a.fail&&a.fail(e)}))},apiRetrieve:function(e,t,a,s){me()({method:"post",url:ve+"/retrieve",data:{description:e,type:t}}).then((function(e){s.success&&s.success(e)})).catch((function(e){s.fail&&s.fail(e)}))},apiUpload:function(e,t,a){me()({method:"post",url:ve+"/upload",headers:{"Content-Type":"multipart/form-data",authorization:t},data:e}).then((function(e){a.success&&a.success(e)})).catch((function(e){a.fail&&a.fail(e)}))},apicreateWallet:function(e,t,a,s,r){me()({method:"post",url:ve+"/createWallet",headers:{authorization:s},data:{walletname:e,type:t,token:a}}).then((function(e){r.success&&r.success(e)})).catch((function(e){r.fail&&r.fail(e)}))},apiPayment:function(e,t,a,s,r,i,n){me()({method:"post",url:ve+"/retrieve/download/payment",headers:{authorization:i},data:{from:e,to:t,amnt:a,cid:s,token:r}}).then((function(e){n.success&&n.success(e)})).catch((function(e){n.fail&&n.fail(e)}))},apiDownload:function(e,t,a,s,r){me()({method:"post",url:ve+"/retrieve/download",headers:{authorization:s},responseType:"blob",data:{filename:e,cid:t,token:a}}).then((function(e){r.success&&r.success(e)})).catch((function(e){r.fail&&r.fail(e)}))}};s["default"].use(pe.a,me.a),s["default"].use(he.a),s["default"].prototype.$req=be,s["default"].config.productionTip=!1,new s["default"]({router:le,store:ue,render:function(e){return e(h)}}).$mount("#app")},7259:function(e,t,a){},"7a83":function(e,t,a){e.exports=a.p+"img/u104.9d58b88c.png"},"7c55":function(e,t,a){"use strict";var s=a("2395"),r=a.n(s);r.a},"7e0e":function(e,t,a){},"8f0e":function(e,t,a){"use strict";var s=a("1a33"),r=a.n(s);r.a},bdd5:function(e,t,a){e.exports=a.p+"img/u161.451b034a.png"},c875:function(e,t,a){"use strict";var s=a("7259"),r=a.n(s);r.a},cad7:function(e,t,a){},dbf9:function(e,t,a){},dc3f:function(e,t,a){e.exports=a.p+"img/u125.63f5d8e6.png"},e3dc:function(e,t,a){e.exports=a.p+"img/u132.36d06323.png"},ea4f:function(e,t,a){"use strict";var s=a("7e0e"),r=a.n(s);r.a},f12d:function(e,t,a){e.exports=a.p+"img/u147.742d0f29.png"},f623:function(e,t,a){e.exports=a.p+"img/u139.d5045609.png"},f73d:function(e,t,a){e.exports=a.p+"img/u97.18e6452b.png"},fccd:function(e,t,a){e.exports=a.p+"img/u118.b6d56489.png"},fd24:function(e,t,a){}});